<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="js/bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/customer.css"/>
    <title>Customer</title>
</head>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-default navbar-fixed-top row center-block">
            <input type="text" class="form-control col-xs-offset"  @keyup="search" v-model="vehid" placeholder="车牌号"/>
        </nav>
        <div class="customer">
            <ul id="myTab" class="nav nav-tabs text-center">
                <li class="active">
                    <a href="#home" data-toggle="tab">全部</a>
                </li>
                <li>
                    <a href="#engine" data-toggle="tab">90天内到期</a>
                </li>
            </ul>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade in active form-group" id="home">
                    <div id="container">
                        <div class="block" v-for="val in resultList">
                            <table class="table">
                                <tbody>
                                <caption class="name">{{val.vehicle_id}}<span>{{val.vehicle_brand}}{{val.engine_number}}</span></caption>
                                <tr class="row">
                                    <td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>
                                    <td class="col-xs-10">
                                        <span>商业险到期:{{val.end_date}}</span>
                                        <br/>
                                        <span>交强险到期:{{val.end_date}}</span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                         </div>
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                        <!--<div class="block">-->
                            <!--<table class="table">-->
                                <!--<tbody>-->
                                <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                                <!--<tr class="row">-->
                                    <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                    <!--<td class="col-xs-10">-->
                                        <!--<span>商业险到期:2017-10-10</span>-->
                                        <!--<br/>-->
                                        <!--<span>交强险到期:2017-10-10</span>-->
                                    <!--</td>-->
                                <!--</tr>-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                    </div>
                </div>
                <div class="tab-pane fade form-group" id="engine">
                    <div class="block" v-for="val in deadlineList">
                        <table class="table">
                            <tbody>
                            <caption class="name">{{val.vehicle_id}}<span>{{val.vehicle_brand}}{{val.engine_number}}轿车</span></caption>
                            <tr class="row">
                                <td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>
                                <td class="col-xs-10">
                                    <span>{{val.end_date}}</span>
                                    <br/>
                                    <span>{{val.end_date}}</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                    <!--<div class="block">-->
                        <!--<table class="table">-->
                            <!--<tbody>-->
                            <!--<caption class="name">黑A5X237<span>大众FV7166FAMGG轿车</span></caption>-->
                            <!--<tr class="row">-->
                                <!--<td class="col-xs-2"><img src="img/搞笑.png" alt=""/></td>-->
                                <!--<td class="col-xs-10">-->
                                    <!--<span>商业险到期:2017-10-10</span>-->
                                    <!--<br/>-->
                                    <!--<span>交强险到期:2017-10-10</span>-->
                                <!--</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->
                </div>
            </div>
        </div>
    </div>
    <div id="footer" class="navbar-fixed-bottom row">
        <nav class="navbar navbar-brand navbar-fixed-bottom">
            <ul class="nav-tabs">
                <li class="col-xs-3 btn btn-sm "><a href="index.html">
                    <img src="img/1.png" alt="" class="icon nav"/><br/>
                    <span>车险报价</span></a></li>
                <li class="col-xs-3 btn btn-sm"><a href="record.html">
                    <img src="img/2.png" alt="" class="icon nav"/><br/>
                    <span>报价记录</span></a></li>
                <li class="col-xs-3 btn btn-sm"><a href="customer.html">
                    <img src="img/other/3.png" alt="" class="icon nav"/><br/>
                    <span class="default">客户</span></a></li>
                <li class="col-xs-3 btn btn-sm"><a href="my.html">
                    <img src="img/4.png" alt="" class="icon nav"/><br/>
                    <span>我的</span></a></li>
            </ul>
        </nav>
    </div>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script src="js/vue.js"></script>
    <!--<script src="js/axios.min"></script>-->
    <script>
        var vm = new Vue({
            el:".container-fluid",
            data:{
                resultList:[],
                deadlineList:[],
                resultAll:[],
                vehid:""
            },
            created:function(){
//                var user = {};
                var user = window.localStorage.getItem('id');
//                console.log(user);
                var _this = this;
                $.getJSON("http://127.0.0.1/robotjox/welcome/get_customer?callback=?",{data:user},function(data){
                    _this.resultList = data;
                    _this.resultAll = data;
                    data.forEach(function(val,index){
                        var dYear = val.end_date.split("-")[0];
                        var dMonth = val.end_date.split("-")[1];
                        var dDay = val.end_date.split("-")[2];
//                        console.log(val.end_date.split("-")[0]);
//                        console.log(val.end_date.split("-")[1]);
//                        console.log(val.end_date.split("-")[2]);
                        var date = new Date();
                        var nYear = date.getFullYear();
                        var nMonth = date.getMonth();
                        var nDay = date.getDate();
//                        console.log(date.getFullYear());
//                        console.log(date.getMonth());
//                        console.log(date.getDate());
//                        console.log(dYear*365+dMonth*30+dDay*1);
//                        console.log(nYear*365+(nMonth+1)*30+nDay*1);
                        if((dYear*365+dMonth*30+dDay*1) - (nYear*365+(nMonth+1)*30+nDay*1) < 90){
                            _this.deadlineList.push(val);
                        }
                    })
//                    console.log(_this.deadlineList)
                })
            },
            methods:{
                search:function(){
                    var _this = this;
                    if(this.vehid == ""){
                        this.resultList = this.resultAll;
                    }else{
                        this.resultList = [];
                        this.resultAll.forEach(function(val,index){
                            if(val.vehicle_id == _this.vehid){
                                _this.resultList.push(val)
                            }
                        })
                    }
                }
            }
        })

    </script>
</body>
</html>